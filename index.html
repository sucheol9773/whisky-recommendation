<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>위스키 맞춤 추천 시스템</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            margin: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState } = React;

        // 간단한 아이콘 컴포넌트들
        const ChevronRight = () => <span>→</span>;
        const ChevronLeft = () => <span>←</span>;
        const RotateCcw = () => <span>↻</span>;
        const Star = () => <span>⭐</span>;
        const MapPin = () => <span>📍</span>;
        const Zap = () => <span>⚡</span>;

        const WhiskyRecommendationApp = () => {
          const [currentStep, setCurrentStep] = useState(0);
          const [answers, setAnswers] = useState({});
          const [result, setResult] = useState(null);

          // 질문 데이터
          const questions = [
            {
              id: 'experience',
              title: '위스키 경험이 어느 정도인가요?',
              type: 'single',
              options: [
                { value: 'beginner', label: '완전 초보자 (위스키를 거의 안 마셔봤어요)', icon: '🌱' },
                { value: 'casual', label: '가끔 마셔봤어요 (하이볼 정도)', icon: '🍹' },
                { value: 'interested', label: '관심이 생겨서 알아보는 중이에요', icon: '🤔' },
                { value: 'experienced', label: '어느 정도 경험이 있어요', icon: '🥃' }
              ]
            },
            {
              id: 'whisky_type_preference',
              title: '어떤 종류의 위스키에 관심이 있으신가요?',
              type: 'multiple',
              subtitle: '생산지/제조방식별 선호도 (여러 개 선택 가능)',
              options: [
                { value: 'scotch_single', label: '스카치 싱글몰트 (한 증류소만, 깊고 개성적인 맛)', icon: '🏴󠁧󠁢󠁳󠁣󠁴󠁿' },
                { value: 'scotch_blend', label: '스카치 블렌디드 (여러 위스키 조합, 균형잡힌 맛)', icon: '🥃' },
                { value: 'american_bourbon', label: '아메리칸 버번 (달콤하고 바닐라향 강한)', icon: '🇺🇸' },
                { value: 'japanese', label: '일본 위스키 (섬세하고 우아한, 꽃향과 균형미)', icon: '🇯🇵' },
                { value: 'irish', label: '아이리시 위스키 (부드럽고 순한, 초보자 친화적)', icon: '🇮🇪' },
                { value: 'any', label: '상관없어요 (다양하게 경험해보고 싶어요)', icon: '🌍' }
              ]
            },
            {
              id: 'flavor_intensity',
              title: '위스키의 맛 강도는 어느 정도를 선호하시나요?',
              type: 'single',
              options: [
                { value: 'mild', label: '부드럽고 순한 맛 (처음 마시기 편한)', icon: '🕊️' },
                { value: 'moderate', label: '적당한 강도 (특징은 있지만 부담스럽지 않은)', icon: '⚖️' },
                { value: 'bold', label: '진하고 강한 맛 (개성이 뚜렷한)', icon: '⚡' },
                { value: 'complex', label: '복합적이고 깊은 맛 (다층적인 풍미)', icon: '🌊' }
              ]
            },
            {
              id: 'sweetness_preference',
              title: '단맛에 대한 선호도는?',
              type: 'single',
              options: [
                { value: 'very_sweet', label: '달콤한 맛을 정말 좋아해요 (꿀, 캐러멜, 바닐라)', icon: '🍯' },
                { value: 'moderate_sweet', label: '적당한 단맛이 좋아요 (과일, 초콜릿)', icon: '🍫' },
                { value: 'dry_sweet', label: '은은한 단맛 정도 (건과일, 견과류)', icon: '🥜' },
                { value: 'no_sweet', label: '단맛보다는 드라이한 맛을 선호해요', icon: '🌿' }
              ]
            },
            {
              id: 'fruit_preference',
              title: '과일향 중에서는 어떤 계열을 선호하시나요?',
              type: 'multiple',
              subtitle: '과일향에 대한 구체적인 선호도',
              options: [
                { value: 'citrus', label: '시트러스 (레몬, 오렌지, 자몽)', icon: '🍊' },
                { value: 'stone_fruit', label: '핵과류 (복숭아, 살구, 자두)', icon: '🍑' },
                { value: 'apple_pear', label: '사과/배 (신선하고 아삭한)', icon: '🍎' },
                { value: 'berry', label: '베리류 (딸기, 블루베리, 라즈베리)', icon: '🫐' },
                { value: 'tropical', label: '열대과일 (파인애플, 망고, 바나나)', icon: '🍍' },
                { value: 'dried_fruit', label: '건과일 (건포도, 무화과, 대추)', icon: '🥭' },
                { value: 'no_fruit', label: '과일향은 별로 선호하지 않아요', icon: '❌' }
              ]
            },
            {
              id: 'smoke_preference',
              title: '스모키한 맛(피트향)에 대해 어떻게 생각하세요?',
              type: 'single',
              subtitle: '아일레이 위스키의 특징인 연기/흙내음',
              options: [
                { value: 'avoid', label: '피하고 싶어요 (연기 냄새는 부담스러워요)', icon: '🚫' },
                { value: 'curious', label: '궁금해요 (한 번 도전해보고 싶어요)', icon: '🤨' },
                { value: 'light_smoke', label: '가벼운 스모키는 괜찮아요', icon: '💨' },
                { value: 'like', label: '스모키한 맛을 좋아해요', icon: '😍' },
                { value: 'love_peat', label: '진한 피트향을 매우 좋아해요', icon: '🔥' }
              ]
            },
            {
              id: 'alcohol_tolerance',
              title: '알코올 도수에 대한 선호도는?',
              type: 'single',
              options: [
                { value: 'low', label: '부드럽고 낮은 도수를 선호 (40도 이하)', icon: '😌' },
                { value: 'medium', label: '적당한 도수가 좋아요 (40-43도)', icon: '👌' },
                { value: 'high', label: '진한 맛을 원해요 (43도 이상)', icon: '💪' },
                { value: 'cask_strength', label: '원액 그대로의 강한 맛도 괜찮아요', icon: '🔥' }
              ]
            },
            {
              id: 'drinking_style',
              title: '어떤 방식으로 마시고 싶으신가요?',
              type: 'multiple',
              options: [
                { value: 'neat', label: '스트레이트 (그대로)', icon: '🥃' },
                { value: 'rocks', label: '온더락 (얼음과 함께)', icon: '🧊' },
                { value: 'highball', label: '하이볼 (탄산수와 함께)', icon: '🥤' },
                { value: 'cocktail', label: '칵테일 베이스로', icon: '🍸' },
                { value: 'water', label: '물을 조금 넣어서', icon: '💧' }
              ]
            },
            {
              id: 'atmosphere',
              title: '어떤 분위기에서 마시고 싶으신가요?',
              type: 'single',
              options: [
                { value: 'casual', label: '집에서 편안하게', icon: '🏠' },
                { value: 'social', label: '친구들과 함께', icon: '👥' },
                { value: 'special', label: '특별한 날에', icon: '🎉' },
                { value: 'contemplative', label: '혼자서 여유롭게', icon: '🤔' }
              ]
            },
            {
              id: 'budget',
              title: '예산대는 어느 정도인가요?',
              type: 'single',
              options: [
                { value: 'budget', label: '5만원 이하 (입문용)', icon: '💰' },
                { value: 'mid', label: '5-10만원 (중급)', icon: '💳' },
                { value: 'premium', label: '10-20만원 (프리미엄)', icon: '💎' },
                { value: 'luxury', label: '20만원 이상 (럭셔리)', icon: '👑' }
              ]
            }
          ];

          // 위스키 데이터베이스 (간소화)
          const whiskies = [
            {
              name: '글렌피딕 12년',
              region: '스코틀랜드 (스페이사이드)',
              type: 'scotch_single',
              abv: 40,
              price: '입문용 (5만원대)',
              intensity: 'mild',
              sweetness: 'moderate_sweet',
              fruits: ['apple_pear', 'citrus'],
              smoke: 'avoid',
              drinking_styles: ['neat', 'rocks', 'water'],
              description: '부드럽고 달콤한 과일향이 특징인 초보자 친화적인 위스키',
              notes: '배, 사과, 꿀, 바닐라의 조화로운 맛',
              suitable_for: ['beginner', 'casual'],
              atmosphere: ['casual', 'social']
            },
            {
              name: '맥켈란 12년',
              region: '스코틀랜드 (스페이사이드)',
              type: 'scotch_single',
              abv: 40,
              price: '중급 (8만원대)',
              intensity: 'moderate',
              sweetness: 'very_sweet',
              fruits: ['dried_fruit', 'citrus'],
              smoke: 'avoid',
              drinking_styles: ['neat', 'rocks'],
              description: '셰리 캐스크 숙성으로 풍부한 단맛과 견과류 향이 특징',
              notes: '건포도, 초콜릿, 생강, 오렌지껍질',
              suitable_for: ['casual', 'interested', 'experienced'],
              atmosphere: ['special', 'contemplative']
            },
            {
              name: '라가불린 16년',
              region: '스코틀랜드 (아일레이)',
              type: 'scotch_single',
              abv: 43,
              price: '프리미엄 (15만원대)',
              intensity: 'complex',
              sweetness: 'dry_sweet',
              fruits: ['dried_fruit'],
              smoke: 'love_peat',
              drinking_styles: ['neat', 'rocks', 'water'],
              description: '강렬한 피트향과 복합적인 맛의 균형이 뛰어난 아일레이 위스키',
              notes: '바다향, 연기, 말린 과일, 후추',
              suitable_for: ['interested', 'experienced'],
              atmosphere: ['contemplative', 'special']
            },
            {
              name: '조니워커 블랙라벨',
              region: '스코틀랜드',
              type: 'scotch_blend',
              abv: 40,
              price: '중급 (7만원대)',
              intensity: 'moderate',
              sweetness: 'moderate_sweet',
              fruits: ['stone_fruit', 'citrus'],
              smoke: 'light_smoke',
              drinking_styles: ['neat', 'rocks', 'highball', 'cocktail'],
              description: '균형잡힌 블렌딩으로 다양한 방식으로 즐길 수 있는 위스키',
              notes: '과일, 바닐라, 스파이스, 가벼운 스모키',
              suitable_for: ['casual', 'interested'],
              atmosphere: ['casual', 'social', 'special']
            },
            {
              name: '히비키 하모니',
              region: '일본',
              type: 'japanese',
              abv: 43,
              price: '프리미엄 (12만원대)',
              intensity: 'moderate',
              sweetness: 'moderate_sweet',
              fruits: ['citrus', 'stone_fruit'],
              smoke: 'avoid',
              drinking_styles: ['neat', 'rocks', 'highball'],
              description: '섬세하고 우아한 일본 위스키의 대표작',
              notes: '꽃향, 꿀, 오렌지, 백단향',
              suitable_for: ['interested', 'experienced'],
              atmosphere: ['special', 'contemplative']
            },
            {
              name: '에반 윌리엄스 블랙',
              region: '미국 (켄터키)',
              type: 'american_bourbon',
              abv: 43,
              price: '입문용 (4만원대)',
              intensity: 'moderate',
              sweetness: 'very_sweet',
              fruits: ['no_fruit'],
              smoke: 'avoid',
              drinking_styles: ['neat', 'rocks', 'cocktail'],
              description: '솔직하고 전형적인 버번의 특성을 가진 가성비 위스키',
              notes: '바닐라, 캐러멜, 브라운슈가, 오크',
              suitable_for: ['beginner', 'casual', 'interested'],
              atmosphere: ['casual', 'social']
            }
          ];

          const handleAnswer = (questionId, value) => {
            const question = questions[currentStep];
            if (question.type === 'multiple') {
              const currentAnswers = answers[questionId] || [];
              const newAnswers = currentAnswers.includes(value)
                ? currentAnswers.filter(v => v !== value)
                : [...currentAnswers, value];
              setAnswers({ ...answers, [questionId]: newAnswers });
            } else {
              setAnswers({ ...answers, [questionId]: value });
            }
          };

          const nextStep = () => {
            if (currentStep < questions.length - 1) {
              setCurrentStep(currentStep + 1);
            } else {
              calculateRecommendation();
            }
          };

          const prevStep = () => {
            if (currentStep > 0) {
              setCurrentStep(currentStep - 1);
            }
          };

          const resetTest = () => {
            setCurrentStep(0);
            setAnswers({});
            setResult(null);
          };

          const calculateRecommendation = () => {
            let scores = whiskies.map(whisky => ({ ...whisky, score: 0 }));

            // 경험도 점수
            if (answers.experience) {
              scores.forEach(whisky => {
                if (whisky.suitable_for.includes(answers.experience)) {
                  whisky.score += 25;
                }
              });
            }

            // 위스키 타입 선호도 점수
            if (answers.whisky_type_preference) {
              scores.forEach(whisky => {
                if (answers.whisky_type_preference.includes('any') || 
                    answers.whisky_type_preference.includes(whisky.type)) {
                  whisky.score += 20;
                }
              });
            }

            // 맛 강도 선호도 점수
            if (answers.flavor_intensity) {
              scores.forEach(whisky => {
                if (whisky.intensity === answers.flavor_intensity) {
                  whisky.score += 20;
                }
              });
            }

            // 단맛 선호도 점수
            if (answers.sweetness_preference) {
              scores.forEach(whisky => {
                if (whisky.sweetness === answers.sweetness_preference) {
                  whisky.score += 20;
                }
              });
            }

            // 과일향 선호도 점수
            if (answers.fruit_preference) {
              scores.forEach(whisky => {
                if (answers.fruit_preference.includes('no_fruit')) {
                  if (whisky.fruits.includes('no_fruit')) {
                    whisky.score += 15;
                  }
                } else {
                  const matchingFruits = whisky.fruits.filter(fruit => 
                    answers.fruit_preference.includes(fruit)
                  ).length;
                  whisky.score += matchingFruits * 10;
                }
              });
            }

            // 스모키 선호도 점수
            if (answers.smoke_preference) {
              scores.forEach(whisky => {
                if (whisky.smoke === answers.smoke_preference) {
                  whisky.score += 25;
                }
                // 부분 매칭도 고려
                if (answers.smoke_preference === 'curious' && whisky.smoke === 'light_smoke') {
                  whisky.score += 15;
                }
              });
            }

            // 도수 선호도 점수
            if (answers.alcohol_tolerance) {
              scores.forEach(whisky => {
                if (answers.alcohol_tolerance === 'low' && whisky.abv <= 40) whisky.score += 15;
                if (answers.alcohol_tolerance === 'medium' && whisky.abv >= 40 && whisky.abv <= 43) whisky.score += 15;
                if (answers.alcohol_tolerance === 'high' && whisky.abv > 43) whisky.score += 15;
              });
            }

            // 마시는 방식 점수
            if (answers.drinking_style) {
              scores.forEach(whisky => {
                const matchingStyles = whisky.drinking_styles.filter(style => 
                  answers.drinking_style.includes(style)
                ).length;
                whisky.score += matchingStyles * 8;
              });
            }

            // 분위기 점수
            if (answers.atmosphere) {
              scores.forEach(whisky => {
                if (whisky.atmosphere.includes(answers.atmosphere)) {
                  whisky.score += 15;
                }
              });
            }

            // 예산 점수
            if (answers.budget) {
              scores.forEach(whisky => {
                if (answers.budget === 'budget' && whisky.price.includes('입문용')) whisky.score += 20;
                if (answers.budget === 'mid' && (whisky.price.includes('중급') || whisky.price.includes('입문용'))) whisky.score += 20;
                if (answers.budget === 'premium' && whisky.price.includes('프리미엄')) whisky.score += 20;
                if (answers.budget === 'luxury' && whisky.price.includes('럭셔리')) whisky.score += 20;
              });
            }

            // 점수순으로 정렬하여 상위 3개 추천
            const recommendations = scores
              .sort((a, b) => b.score - a.score)
              .slice(0, 3);

            // 매칭도를 자연스럽게 계산
            if (recommendations.length > 0) {
              const maxPossibleScore = 180;
              
              recommendations.forEach(whisky => {
                const rawPercentage = (whisky.score / maxPossibleScore) * 100;
                whisky.matchPercentage = Math.min(98, Math.max(65, Math.round(rawPercentage)));
              });
            }

            setResult(recommendations);
          };

          const currentQuestion = questions[currentStep];
          const canProceed = answers[currentQuestion?.id] && 
            (currentQuestion?.type !== 'multiple' || answers[currentQuestion?.id].length > 0);

          if (result) {
            return (
              <div className="max-w-4xl mx-auto p-6 bg-gradient-to-br from-amber-50 to-orange-50 min-h-screen">
                <div className="bg-white rounded-2xl shadow-2xl p-8">
                  <div className="text-center mb-8">
                    <h1 className="text-3xl font-bold text-amber-800 mb-2">🥃 당신만의 위스키를 찾았습니다!</h1>
                    <p className="text-gray-600">취향 분석을 바탕으로 엄선한 추천 위스키들이에요</p>
                  </div>

                  <div className="space-y-6">
                    {result.map((whisky, index) => (
                      <div key={index} className="bg-gradient-to-r from-amber-100 to-orange-100 rounded-xl p-6 border-2 border-amber-200">
                        <div className="flex items-start justify-between mb-4">
                          <div className="flex items-center gap-3">
                            <div className="bg-amber-500 text-white rounded-full w-8 h-8 flex items-center justify-center font-bold">
                              {index + 1}
                            </div>
                            <h3 className="text-xl font-bold text-amber-900">{whisky.name}</h3>
                            <div className="flex items-center gap-1">
                              <span className="text-sm text-gray-600">추천도:</span>
                              <div className="flex text-amber-500">
                                {[...Array(Math.min(5, Math.max(1, Math.round((whisky.matchPercentage / 100) * 5))))].map((_, i) => (
                                  <Star key={i} />
                                ))}
                              </div>
                            </div>
                          </div>
                          <div className="bg-amber-200 px-3 py-1 rounded-full text-sm font-medium text-amber-800">
                            매칭도: {whisky.matchPercentage}%
                          </div>
                        </div>

                        <div className="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                          <div className="space-y-2">
                            <div className="flex items-center gap-2 text-sm text-gray-700">
                              <MapPin />
                              <span>{whisky.region}</span>
                            </div>
                            <div className="flex items-center gap-2 text-sm text-gray-700">
                              <Zap />
                              <span>도수: {whisky.abv}%</span>
                            </div>
                            <div className="flex items-center gap-2 text-sm text-gray-700">
                              💰
                              <span>{whisky.price}</span>
                            </div>
                          </div>
                          <div className="space-y-2">
                            <div className="flex flex-wrap gap-1">
                              <span className="bg-white px-2 py-1 rounded-full text-xs text-amber-700 border border-amber-300">
                                {whisky.intensity === 'mild' && '부드러운'}
                                {whisky.intensity === 'moderate' && '적당한'}
                                {whisky.intensity === 'bold' && '진한'}
                                {whisky.intensity === 'complex' && '복합적인'}
                              </span>
                              <span className="bg-white px-2 py-1 rounded-full text-xs text-amber-700 border border-amber-300">
                                {whisky.sweetness === 'very_sweet' && '달콤함'}
                                {whisky.sweetness === 'moderate_sweet' && '적당한 단맛'}
                                {whisky.sweetness === 'dry_sweet' && '은은한 단맛'}
                                {whisky.sweetness === 'no_sweet' && '드라이함'}
                              </span>
                              
                              {/* 피트향/스모키 강도 */}
                              {whisky.smoke === 'love_peat' && (
                                <span className="bg-red-100 px-2 py-1 rounded-full text-xs text-red-700 border border-red-300 font-medium">🔥 진한 피트향</span>
                              )}
                              {whisky.smoke === 'like' && (
                                <span className="bg-orange-100 px-2 py-1 rounded-full text-xs text-orange-700 border border-orange-300 font-medium">💨 스모키</span>
                              )}
                              {whisky.smoke === 'light_smoke' && (
                                <span className="bg-yellow-100 px-2 py-1 rounded-full text-xs text-yellow-700 border border-yellow-300 font-medium">☁️ 가벼운 스모키</span>
                              )}
                              {whisky.smoke === 'avoid' && (
                                <span className="bg-green-100 px-2 py-1 rounded-full text-xs text-green-700 border border-green-300 font-medium">✨ 논스모키</span>
                              )}
                            </div>
                          </div>
                        </div>

                        <p className="text-gray-700 mb-2">{whisky.description}</p>
                        <p className="text-sm text-gray-600 bg-white p-3 rounded-lg">
                          <strong>테이스팅 노트:</strong> {whisky.notes}
                        </p>
                      </div>
                    ))}
                  </div>

                  <div className="mt-8 text-center">
                    <button
                      onClick={resetTest}
                      className="inline-flex items-center gap-2 bg-amber-600 text-white px-6 py-3 rounded-xl hover:bg-amber-700 transition-colors font-medium"
                    >
                      <RotateCcw />
                      다시 테스트하기
                    </button>
                  </div>

                  <div className="mt-8 p-4 bg-amber-50 rounded-xl">
                    <h4 className="font-bold text-amber-800 mb-2">💡 초보자를 위한 팁</h4>
                    <ul className="text-sm text-gray-700 space-y-1">
                      <li>• 처음엔 스트레이트보다 온더락이나 하이볼로 시작해보세요</li>
                      <li>• 위스키 전용 글라스를 사용하면 향을 더 잘 느낄 수 있어요</li>
                      <li>• 물을 한두 방울 떨어뜨리면 향이 더 활짝 열립니다</li>
                      <li>• 천천히 음미하며 마시는 것이 포인트예요</li>
                    </ul>
                  </div>
                </div>
              </div>
            );
          }

          return (
            <div className="max-w-2xl mx-auto p-6 bg-gradient-to-br from-amber-50 to-orange-50 min-h-screen">
              <div className="bg-white rounded-2xl shadow-2xl p-8">
                {/* 헤더 */}
                <div className="text-center mb-8">
                  <h1 className="text-3xl font-bold text-amber-800 mb-2">🥃 나만의 위스키 찾기</h1>
                  <p className="text-gray-600">MBTI처럼 간단한 질문으로 취향에 맞는 위스키를 추천해드려요</p>
                </div>

                {/* 진행도 */}
                <div className="mb-8">
                  <div className="flex justify-between text-sm text-gray-500 mb-2">
                    <span>진행도</span>
                    <span>{currentStep + 1} / {questions.length}</span>
                  </div>
                  <div className="w-full bg-gray-200 rounded-full h-2">
                    <div 
                      className="bg-gradient-to-r from-amber-400 to-orange-500 h-2 rounded-full transition-all duration-500"
                      style={{ width: `${((currentStep + 1) / questions.length) * 100}%` }}
                    />
                  </div>
                </div>

                {/* 질문 */}
                <div className="mb-8">
                  <h2 className="text-xl font-bold text-gray-800 mb-2">{currentQuestion.title}</h2>
                  {currentQuestion.subtitle && (
                    <p className="text-sm text-gray-600 mb-4">{currentQuestion.subtitle}</p>
                  )}

                  <div className="space-y-3">
                    {currentQuestion.options.map((option) => {
                      const isSelected = currentQuestion.type === 'multiple' 
                        ? (answers[currentQuestion.id] || []).includes(option.value)
                        : answers[currentQuestion.id] === option.value;

                      return (
                        <button
                          key={option.value}
                          onClick={() => handleAnswer(currentQuestion.id, option.value)}
                          className={`w-full p-4 rounded-xl border-2 text-left transition-all duration-200 ${
                            isSelected
                              ? 'border-amber-500 bg-amber-50 text-amber-900'
                              : 'border-gray-200 hover:border-amber-300 hover:bg-amber-25'
                          }`}
                        >
                          <div className="flex items-center gap-3">
                            <span className="text-2xl">{option.icon}</span>
                            <span className="font-medium">{option.label}</span>
                          </div>
                        </button>
                      );
                    })}
                  </div>
                </div>

                {/* 네비게이션 */}
                <div className="flex justify-between">
                  <button
                    onClick={prevStep}
                    disabled={currentStep === 0}
                    className={`inline-flex items-center gap-2 px-6 py-3 rounded-xl transition-colors ${
                      currentStep === 0
                        ? 'bg-gray-100 text-gray-400 cursor-not-allowed'
                        : 'bg-gray-200 text-gray-700 hover:bg-gray-300'
                    }`}
                  >
                    <ChevronLeft />
                    이전
                  </button>

                  <button
                    onClick={nextStep}
                    disabled={!canProceed}
                    className={`inline-flex items-center gap-2 px-6 py-3 rounded-xl transition-colors font-medium ${
                      canProceed
                        ? 'bg-amber-600 text-white hover:bg-amber-700'
                        : 'bg-gray-100 text-gray-400 cursor-not-allowed'
                    }`}
                  >
                    {currentStep === questions.length - 1 ? '결과 보기' : '다음'}
                    <ChevronRight />
                  </button>
                </div>
              </div>
            </div>
          );
        };

        ReactDOM.render(<WhiskyRecommendationApp />, document.getElementById('root'));
    </script>
</body>
</html><!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>위스키 맞춤 추천 시스템</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lucide-react/0.263.1/lucide-react.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            margin: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState } = React;
        const { ChevronRight, ChevronLeft, RotateCcw, Star, MapPin, Grape, Clock, Thermometer, Zap } = lucide;

        const WhiskyRecommendationApp = () => {
          const [currentStep, setCurrentStep] = useState(0);
          const [answers, setAnswers] = useState({});
          const [result, setResult] = useState(null);

          // 질문 데이터
          const questions = [
            {
              id: 'experience',
              title: '위스키 경험이 어느 정도인가요?',
              type: 'single',
              options: [
                { value: 'beginner', label: '완전 초보자 (위스키를 거의 안 마셔봤어요)', icon: '🌱' },
                { value: 'casual', label: '가끔 마셔봤어요 (하이볼 정도)', icon: '🍹' },
                { value: 'interested', label: '관심이 생겨서 알아보는 중이에요', icon: '🤔' },
                { value: 'experienced', label: '어느 정도 경험이 있어요', icon: '🥃' }
              ]
            },
            {
              id: 'whisky_type_preference',
              title: '어떤 종류의 위스키에 관심이 있으신가요?',
              type: 'multiple',
              subtitle: '생산지/제조방식별 선호도 (여러 개 선택 가능)',
              options: [
                { value: 'scotch_single', label: '스카치 싱글몰트 (한 증류소만, 깊고 개성적인 맛)', icon: '🏴󠁧󠁢󠁳󠁣󠁴󠁿' },
                { value: 'scotch_blend', label: '스카치 블렌디드 (여러 위스키 조합, 균형잡힌 맛)', icon: '🥃' },
                { value: 'american_bourbon', label: '아메리칸 버번 (달콤하고 바닐라향 강한)', icon: '🇺🇸' },
                { value: 'japanese', label: '일본 위스키 (섬세하고 우아한, 꽃향과 균형미)', icon: '🇯🇵' },
                { value: 'irish', label: '아이리시 위스키 (부드럽고 순한, 초보자 친화적)', icon: '🇮🇪' },
                { value: 'any', label: '상관없어요 (다양하게 경험해보고 싶어요)', icon: '🌍' }
              ]
            },
            {
              id: 'flavor_intensity',
              title: '위스키의 맛 강도는 어느 정도를 선호하시나요?',
              type: 'single',
              options: [
                { value: 'mild', label: '부드럽고 순한 맛 (처음 마시기 편한)', icon: '🕊️' },
                { value: 'moderate', label: '적당한 강도 (특징은 있지만 부담스럽지 않은)', icon: '⚖️' },
                { value: 'bold', label: '진하고 강한 맛 (개성이 뚜렷한)', icon: '⚡' },
                { value: 'complex', label: '복합적이고 깊은 맛 (다층적인 풍미)', icon: '🌊' }
              ]
            },
            {
              id: 'sweetness_preference',
              title: '단맛에 대한 선호도는?',
              type: 'single',
              options: [
                { value: 'very_sweet', label: '달콤한 맛을 정말 좋아해요 (꿀, 캐러멜, 바닐라)', icon: '🍯' },
                { value: 'moderate_sweet', label: '적당한 단맛이 좋아요 (과일, 초콜릿)', icon: '🍫' },
                { value: 'dry_sweet', label: '은은한 단맛 정도 (건과일, 견과류)', icon: '🥜' },
                { value: 'no_sweet', label: '단맛보다는 드라이한 맛을 선호해요', icon: '🌿' }
              ]
            },
            {
              id: 'fruit_preference',
              title: '과일향 중에서는 어떤 계열을 선호하시나요?',
              type: 'multiple',
              subtitle: '과일향에 대한 구체적인 선호도',
              options: [
                { value: 'citrus', label: '시트러스 (레몬, 오렌지, 자몽)', icon: '🍊' },
                { value: 'stone_fruit', label: '핵과류 (복숭아, 살구, 자두)', icon: '🍑' },
                { value: 'apple_pear', label: '사과/배 (신선하고 아삭한)', icon: '🍎' },
                { value: 'berry', label: '베리류 (딸기, 블루베리, 라즈베리)', icon: '🫐' },
                { value: 'tropical', label: '열대과일 (파인애플, 망고, 바나나)', icon: '🍍' },
                { value: 'dried_fruit', label: '건과일 (건포도, 무화과, 대추)', icon: '🥭' },
                { value: 'no_fruit', label: '과일향은 별로 선호하지 않아요', icon: '❌' }
              ]
            },
            {
              id: 'spice_preference',
              title: '향신료/스파이스 계열은 어떠신가요?',
              type: 'single',
              options: [
                { value: 'love_spice', label: '스파이시한 맛을 좋아해요 (후추, 계피, 생강)', icon: '🌶️' },
                { value: 'warm_spice', label: '따뜻한 향신료가 좋아요 (바닐라, 육두구)', icon: '🧂' },
                { value: 'mild_spice', label: '은은한 스파이스 정도 (정향, 올스파이스)', icon: '🌿' },
                { value: 'avoid_spice', label: '매운맛/자극적인 맛은 피하고 싶어요', icon: '🚫' }
              ]
            },
            {
              id: 'wood_influence',
              title: '나무통(오크) 숙성에 따른 풍미는?',
              type: 'single',
              subtitle: '위스키 숙성 과정에서 나오는 나무 계열 맛',
              options: [
                { value: 'heavy_oak', label: '진한 오크향을 좋아해요 (토스트, 탄 나무)', icon: '🌳' },
                { value: 'vanilla_oak', label: '바닐라 오크향이 좋아요 (부드럽고 달콤한)', icon: '🍦' },
                { value: 'sherry_cask', label: '셰리통 숙성 맛 (건포도, 견과류, 초콜릿)', icon: '🍷' },
                { value: 'bourbon_cask', label: '버번통 숙성 맛 (카라멜, 바닐라)', icon: '🥃' },
                { value: 'light_wood', label: '가벼운 나무향 정도만', icon: '🪵' },
                { value: 'no_wood', label: '나무향은 별로 선호하지 않아요', icon: '🚫' }
              ]
            },
            {
              id: 'smoke_preference',
              title: '스모키한 맛(피트향)에 대해 어떻게 생각하세요?',
              type: 'single',
              subtitle: '아일레이 위스키의 특징인 연기/흙내음',
              options: [
                { value: 'avoid', label: '피하고 싶어요 (연기 냄새는 부담스러워요)', icon: '🚫' },
                { value: 'curious', label: '궁금해요 (한 번 도전해보고 싶어요)', icon: '🤨' },
                { value: 'light_smoke', label: '가벼운 스모키는 괜찮아요', icon: '💨' },
                { value: 'like', label: '스모키한 맛을 좋아해요', icon: '😍' },
                { value: 'love_peat', label: '진한 피트향을 매우 좋아해요', icon: '🔥' }
              ]
            },
            {
              id: 'body_texture',
              title: '위스키의 바디감(질감)은 어떤 걸 선호하시나요?',
              type: 'single',
              subtitle: '입 안에서 느껴지는 무게감과 질감',
              options: [
                { value: 'light', label: '가볍고 부드러운 질감 (물처럼 가벼운)', icon: '💧' },
                { value: 'medium', label: '적당한 바디감 (균형잡힌 질감)', icon: '⚖️' },
                { value: 'full', label: '풀바디 (진하고 묵직한 질감)', icon: '🍯' },
                { value: 'oily', label: '오일리한 질감 (입 안을 감싸는)', icon: '🫒' }
              ]
            },
            {
              id: 'finish_preference',
              title: '피니시(여운)는 어떤 스타일을 원하시나요?',
              type: 'single',
              subtitle: '삼킨 후 입 안에 남는 맛과 지속시간',
              options: [
                { value: 'short_clean', label: '짧고 깔끔한 여운 (깔끔하게 끝나는)', icon: '✨' },
                { value: 'medium_smooth', label: '적당하고 부드러운 여운', icon: '🌊' },
                { value: 'long_complex', label: '길고 복합적인 여운 (계속 변화하는)', icon: '🌈' },
                { value: 'warming', label: '따뜻하고 지속적인 여운 (가슴까지 따뜻한)', icon: '🔥' }
              ]
            },
            {
              id: 'alcohol_tolerance',
              title: '알코올 도수에 대한 선호도는?',
              type: 'single',
              options: [
                { value: 'low', label: '부드럽고 낮은 도수를 선호 (40도 이하)', icon: '😌' },
                { value: 'medium', label: '적당한 도수가 좋아요 (40-43도)', icon: '👌' },
                { value: 'high', label: '진한 맛을 원해요 (43도 이상)', icon: '💪' },
                { value: 'cask_strength', label: '원액 그대로의 강한 맛도 괜찮아요', icon: '🔥' }
              ]
            },
            {
              id: 'drinking_style',
              title: '어떤 방식으로 마시고 싶으신가요?',
              type: 'multiple',
              options: [
                { value: 'neat', label: '스트레이트 (그대로)', icon: '🥃' },
                { value: 'rocks', label: '온더락 (얼음과 함께)', icon: '🧊' },
                { value: 'highball', label: '하이볼 (탄산수와 함께)', icon: '🥤' },
                { value: 'cocktail', label: '칵테일 베이스로', icon: '🍸' },
                { value: 'water', label: '물을 조금 넣어서', icon: '💧' }
              ]
            },
            {
              id: 'atmosphere',
              title: '어떤 분위기에서 마시고 싶으신가요?',
              type: 'single',
              options: [
                { value: 'casual', label: '집에서 편안하게', icon: '🏠' },
                { value: 'social', label: '친구들과 함께', icon: '👥' },
                { value: 'special', label: '특별한 날에', icon: '🎉' },
                { value: 'contemplative', label: '혼자서 여유롭게', icon: '🤔' }
              ]
            },
            {
              id: 'budget',
              title: '예산대는 어느 정도인가요?',
              type: 'single',
              options: [
                { value: 'budget', label: '5만원 이하 (입문용)', icon: '💰' },
                { value: 'mid', label: '5-10만원 (중급)', icon: '💳' },
                { value: 'premium', label: '10-20만원 (프리미엄)', icon: '💎' },
                { value: 'luxury', label: '20만원 이상 (럭셔리)', icon: '👑' }
              ]
            }
          ];

          // 위스키 데이터베이스
          const whiskies = [
            {
              name: '글렌피딕 12년',
              region: '스코틀랜드 (스페이사이드)',
              type: 'scotch_single',
              abv: 40,
              price: '입문용 (5만원대)',
              intensity: 'mild',
              sweetness: 'moderate_sweet',
              fruits: ['apple_pear', 'citrus'],
              spice: 'mild_spice',
              wood: 'bourbon_cask',
              smoke: 'avoid',
              body: 'light',
              finish: 'medium_smooth',
              drinking_styles: ['neat', 'rocks', 'water'],
              description: '부드럽고 달콤한 과일향이 특징인 초보자 친화적인 위스키',
              notes: '배, 사과, 꿀, 바닐라의 조화로운 맛',
              suitable_for: ['beginner', 'casual'],
              atmosphere: ['casual', 'social']
            },
            {
              name: '맥켈란 12년',
              region: '스코틀랜드 (스페이사이드)',
              type: 'scotch_single',
              abv: 40,
              price: '중급 (8만원대)',
              intensity: 'moderate',
              sweetness: 'very_sweet',
              fruits: ['dried_fruit', 'citrus'],
              spice: 'warm_spice',
              wood: 'sherry_cask',
              smoke: 'avoid',
              body: 'medium',
              finish: 'long_complex',
              drinking_styles: ['neat', 'rocks'],
              description: '셰리 캐스크 숙성으로 풍부한 단맛과 견과류 향이 특징',
              notes: '건포도, 초콜릿, 생강, 오렌지껍질',
              suitable_for: ['casual', 'interested', 'experienced'],
              atmosphere: ['special', 'contemplative']
            },
            {
              name: '라가불린 16년',
              region: '스코틀랜드 (아일레이)',
              type: 'scotch_single',
              abv: 43,
              price: '프리미엄 (15만원대)',
              intensity: 'complex',
              sweetness: 'dry_sweet',
              fruits: ['dried_fruit'],
              spice: 'love_spice',
              wood: 'heavy_oak',
              smoke: 'love_peat',
              body: 'full',
              finish: 'long_complex',
              drinking_styles: ['neat', 'rocks', 'water'],
              description: '강렬한 피트향과 복합적인 맛의 균형이 뛰어난 아일레이 위스키',
              notes: '바다향, 연기, 말린 과일, 후추',
              suitable_for: ['interested', 'experienced'],
              atmosphere: ['contemplative', 'special']
            },
            {
              name: '옐로우로즈 프리미엄',
              region: '미국 (텍사스)',
              type: 'american_bourbon',
              abv: 40,
              price: '입문용 (5만원대)',
              intensity: 'mild',
              sweetness: 'very_sweet',
              fruits: ['tropical', 'stone_fruit'],
              spice: 'warm_spice',
              wood: 'bourbon_cask',
              smoke: 'avoid',
              body: 'light',
              finish: 'short_clean',
              drinking_styles: ['neat', 'rocks', 'highball', 'cocktail'],
              description: '부드러운 바닐라와 과일의 달콤함이 특징인 초보자용',
              notes: '바닐라, 바나나칩, 캐러멜',
              suitable_for: ['beginner', 'casual'],
              atmosphere: ['casual', 'social']
            },
            {
              name: '조니워커 블랙라벨',
              region: '스코틀랜드',
              type: 'scotch_blend',
              abv: 40,
              price: '중급 (7만원대)',
              intensity: 'moderate',
              sweetness: 'moderate_sweet',
              fruits: ['stone_fruit', 'citrus'],
              spice: 'warm_spice',
              wood: 'vanilla_oak',
              smoke: 'light_smoke',
              body: 'medium',
              finish: 'medium_smooth',
              drinking_styles: ['neat', 'rocks', 'highball', 'cocktail'],
              description: '균형잡힌 블렌딩으로 다양한 방식으로 즐길 수 있는 위스키',
              notes: '과일, 바닐라, 스파이스, 가벼운 스모키',
              suitable_for: ['casual', 'interested'],
              atmosphere: ['casual', 'social', 'special']
            },
            {
              name: '히비키 하모니',
              region: '일본',
              type: 'japanese',
              abv: 43,
              price: '프리미엄 (12만원대)',
              intensity: 'moderate',
              sweetness: 'moderate_sweet',
              fruits: ['citrus', 'stone_fruit'],
              spice: 'mild_spice',
              wood: 'light_wood',
              smoke: 'avoid',
              body: 'medium',
              finish: 'long_complex',
              drinking_styles: ['neat', 'rocks', 'highball'],
              description: '섬세하고 우아한 일본 위스키의 대표작',
              notes: '꽃향, 꿀, 오렌지, 백단향',
              suitable_for: ['interested', 'experienced'],
              atmosphere: ['special', 'contemplative']
            },
            {
              name: '탈리스커 10년',
              region: '스코틀랜드 (아일 오브 스카이)',
              type: 'scotch_single',
              abv: 45.8,
              price: '중급 (9만원대)',
              intensity: 'bold',
              sweetness: 'dry_sweet',
              fruits: ['dried_fruit'],
              spice: 'love_spice',
              wood: 'heavy_oak',
              smoke: 'like',
              body: 'full',
              finish: 'warming',
              drinking_styles: ['neat', 'rocks', 'water'],
              description: '바다의 염기와 후추 향신료가 특징인 독특한 위스키',
              notes: '바다향, 후추, 말린 과일, 연기',
              suitable_for: ['interested', 'experienced'],
              atmosphere: ['contemplative', 'special']
            },
            {
              name: '에반 윌리엄스 블랙',
              region: '미국 (켄터키)',
              type: 'american_bourbon',
              abv: 43,
              price: '입문용 (4만원대)',
              intensity: 'moderate',
              sweetness: 'very_sweet',
              fruits: ['no_fruit'],
              spice: 'warm_spice',
              wood: 'vanilla_oak',
              smoke: 'avoid',
              body: 'medium',
              finish: 'medium_smooth',
              drinking_styles: ['neat', 'rocks', 'cocktail'],
              description: '솔직하고 전형적인 버번의 특성을 가진 가성비 위스키',
              notes: '바닐라, 캐러멜, 브라운슈가, 오크',
              suitable_for: ['beginner', 'casual', 'interested'],
              atmosphere: ['casual', 'social']
            }
          ];

          const handleAnswer = (questionId, value) => {
            const question = questions[currentStep];
            if (question.type === 'multiple') {
              const currentAnswers = answers[questionId] || [];
              const newAnswers = currentAnswers.includes(value)
                ? currentAnswers.filter(v => v !== value)
                : [...currentAnswers, value];
              setAnswers({ ...answers, [questionId]: newAnswers });
            } else {
              setAnswers({ ...answers, [questionId]: value });
            }
          };

          const nextStep = () => {
            if (currentStep < questions.length - 1) {
              setCurrentStep(currentStep + 1);
            } else {
              calculateRecommendation();
            }
          };

          const prevStep = () => {
            if (currentStep > 0) {
              setCurrentStep(currentStep - 1);
            }
          };

          const resetTest = () => {
            setCurrentStep(0);
            setAnswers({});
            setResult(null);
          };

          const calculateRecommendation = () => {
            let scores = whiskies.map(whisky => ({ ...whisky, score: 0 }));

            // 경험도 점수
            if (answers.experience) {
              scores.forEach(whisky => {
                if (whisky.suitable_for.includes(answers.experience)) {
                  whisky.score += 20;
                }
              });
            }

            // 위스키 타입 선호도 점수
            if (answers.whisky_type_preference) {
              scores.forEach(whisky => {
                if (answers.whisky_type_preference.includes('any') || 
                    answers.whisky_type_preference.includes(whisky.type)) {
                  whisky.score += 15;
                }
              });
            }

            // 맛 강도 선호도 점수
            if (answers.flavor_intensity) {
              scores.forEach(whisky => {
                if (whisky.intensity === answers.flavor_intensity) {
                  whisky.score += 15;
                }
              });
            }

            // 단맛 선호도 점수
            if (answers.sweetness_preference) {
              scores.forEach(whisky => {
                if (whisky.sweetness === answers.sweetness_preference) {
                  whisky.score += 15;
                }
              });
            }

            // 과일향 선호도 점수
            if (answers.fruit_preference) {
              scores.forEach(whisky => {
                if (answers.fruit_preference.includes('no_fruit')) {
                  if (whisky.fruits.includes('no_fruit')) {
                    whisky.score += 10;
                  }
                } else {
                  const matchingFruits = whisky.fruits.filter(fruit => 
                    answers.fruit_preference.includes(fruit)
                  ).length;
                  whisky.score += matchingFruits * 8;
                }
              });
            }

            // 스파이스 선호도 점수
            if (answers.spice_preference) {
              scores.forEach(whisky => {
                if (whisky.spice === answers.spice_preference) {
                  whisky.score += 15;
                }
              });
            }

            // 나무통 숙성 선호도 점수
            if (answers.wood_influence) {
              scores.forEach(whisky => {
                if (whisky.wood === answers.wood_influence) {
                  whisky.score += 15;
                }
              });
            }

            // 스모키 선호도 점수
            if (answers.smoke_preference) {
              scores.forEach(whisky => {
                if (whisky.smoke === answers.smoke_preference) {
                  whisky.score += 20;
                }
                // 부분 매칭도 고려
                if (answers.smoke_preference === 'curious' && whisky.smoke === 'light_smoke') {
                  whisky.score += 10;
                }
                if (answers.smoke_preference === 'like' && whisky.smoke === 'light_smoke') {
                  whisky.score += 15;
                }
              });
            }

            // 바디감 선호도 점수
            if (answers.body_texture) {
              scores.forEach(whisky => {
                if (whisky.body === answers.body_texture) {
                  whisky.score += 12;
                }
              });
            }

            // 피니시 선호도 점수
            if (answers.finish_preference) {
              scores.forEach(whisky => {
                if (whisky.finish === answers.finish_preference) {
                  whisky.score += 12;
                }
              });
            }

            // 도수 선호도 점수
            if (answers.alcohol_tolerance) {
              scores.forEach(whisky => {
                if (answers.alcohol_tolerance === 'low' && whisky.abv <= 40) whisky.score += 10;
                if (answers.alcohol_tolerance === 'medium' && whisky.abv >= 40 && whisky.abv <= 43) whisky.score += 10;
                if (answers.alcohol_tolerance === 'high' && whisky.abv > 43) whisky.score += 10;
                if (answers.alcohol_tolerance === 'cask_strength' && whisky.abv > 45) whisky.score += 10;
              });
            }

            // 마시는 방식 점수
            if (answers.drinking_style) {
              scores.forEach(whisky => {
                const matchingStyles = whisky.drinking_styles.filter(style => 
                  answers.drinking_style.includes(style)
                ).length;
                whisky.score += matchingStyles * 8;
              });
            }

            // 분위기 점수
            if (answers.atmosphere) {
              scores.forEach(whisky => {
                if (whisky.atmosphere.includes(answers.atmosphere)) {
                  whisky.score += 10;
                }
              });
            }

            // 예산 점수
            if (answers.budget) {
              scores.forEach(whisky => {
                if (answers.budget === 'budget' && whisky.price.includes('입문용')) whisky.score += 15;
                if (answers.budget === 'mid' && (whisky.price.includes('중급') || whisky.price.includes('입문용'))) whisky.score += 15;
                if (answers.budget === 'premium' && whisky.price.includes('프리미엄')) whisky.score += 15;
                if (answers.budget === 'luxury' && whisky.price.includes('럭셔리')) whisky